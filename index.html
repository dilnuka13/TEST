<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduPapers.lk - ශ්‍රී ලංකා උසස්පෙළ අධ්‍යාපන පද්ධතිය</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@400;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4285F4;
            --secondary-color: #34A853;
            --accent-color: #EA4335;
            --light-color: #F5F5F5;
            --dark-color: #333333;
            --text-color: #444444;
            --border-radius: 8px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans Sinhala', 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #f9f9f9;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: white;
            box-shadow: var(--box-shadow);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo img {
            height: 50px;
            margin-right: 10px;
        }

        .logo h1 {
            font-size: 24px;
            color: var(--primary-color);
            font-weight: 700;
        }

        .logo span {
            color: var(--secondary-color);
        }

        .user-profile {
            display: flex;
            align-items: center;
            cursor: pointer;
            position: relative;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
            border: 2px solid var(--primary-color);
            transition: var(--transition);
        }

        .user-avatar:hover {
            transform: scale(1.1);
        }

        .user-name {
            font-weight: 600;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            width: 200px;
            padding: 10px 0;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 100;
        }

        .user-profile:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
        }

        .dropdown-menu a {
            display: block;
            padding: 10px 20px;
            color: var(--text-color);
            text-decoration: none;
            transition: var(--transition);
        }

        .dropdown-menu a:hover {
            background-color: var(--light-color);
            color: var(--primary-color);
        }

        .dropdown-menu hr {
            border: none;
            height: 1px;
            background-color: #eee;
            margin: 5px 0;
        }

        /* Main Content Styles */
        main {
            margin-top: 80px;
            padding: 30px 0;
        }

        .welcome-section {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeIn 1s ease;
        }

        .welcome-section h2 {
            font-size: 28px;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .welcome-section p {
            font-size: 16px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Subject Stream Selection */
        .stream-section {
            margin-bottom: 40px;
            animation: slideUp 0.8s ease;
        }

        .section-title {
            font-size: 22px;
            margin-bottom: 20px;
            color: var(--dark-color);
            position: relative;
            padding-bottom: 10px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 3px;
            background-color: var(--primary-color);
        }

        .stream-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .stream-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            transition: var(--transition);
            cursor: pointer;
            text-align: center;
        }

        .stream-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .stream-icon {
            font-size: 40px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .stream-card h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        .stream-card p {
            font-size: 14px;
            color: var(--text-color);
        }

        /* Subjects Section */
        .subjects-section {
            animation: slideUp 1s ease;
        }

        .subjects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .subject-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            transition: var(--transition);
            cursor: pointer;
            border-left: 4px solid var(--primary-color);
        }

        .subject-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .subject-card h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        .subject-card p {
            font-size: 14px;
            color: var(--text-color);
            margin-bottom: 15px;
        }

        .subject-meta {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #777;
        }

        /* Footer Styles */
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 40px 0 20px;
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-column h3 {
            font-size: 18px;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 2px;
            background-color: var(--primary-color);
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 10px;
        }

        .footer-column ul li a {
            color: #ccc;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-column ul li a:hover {
            color: white;
            padding-left: 5px;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #444;
            font-size: 14px;
            color: #aaa;
        }

        /* Auth Modal Styles */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .auth-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .auth-container {
            background-color: white;
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 500px;
            padding: 30px;
            box-shadow: var(--box-shadow);
            transform: translateY(-20px);
            transition: var(--transition);
        }

        .auth-modal.active .auth-container {
            transform: translateY(0);
        }

        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-header h2 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .auth-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .auth-tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: var(--transition);
        }

        .auth-tab.active {
            border-bottom: 2px solid var(--primary-color);
            color: var(--primary-color);
            font-weight: 600;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-family: inherit;
            font-size: 16px;
            transition: var(--transition);
        }

        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.2);
        }

        .google-auth-btn {
            width: 100%;
            padding: 12px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 20px;
        }

        .google-auth-btn:hover {
            background-color: #f5f5f5;
        }

        .google-auth-btn img {
            width: 20px;
            margin-right: 10px;
        }

        .submit-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 16px;
        }

        .submit-btn:hover {
            background-color: #3367d6;
        }

        .auth-footer {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
        }

        .auth-footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        /* Profile Modal */
        .profile-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .profile-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .profile-container {
            background-color: white;
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 600px;
            padding: 30px;
            box-shadow: var(--box-shadow);
            transform: translateY(-20px);
            transition: var(--transition);
            max-height: 90vh;
            overflow-y: auto;
        }

        .profile-modal.active .profile-container {
            transform: translateY(0);
        }

        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 20px;
            border: 3px solid var(--primary-color);
        }

        .profile-info h2 {
            color: var(--dark-color);
            margin-bottom: 5px;
        }

        .profile-info p {
            color: var(--text-color);
            font-size: 14px;
        }

        .profile-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .detail-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 5px;
            color: var(--dark-color);
        }

        .detail-group p {
            background-color: var(--light-color);
            padding: 10px 15px;
            border-radius: var(--border-radius);
            font-size: 14px;
        }

        .profile-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }

        .edit-btn, .save-btn, .cancel-btn {
            padding: 10px 20px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }

        .edit-btn {
            background-color: var(--primary-color);
            color: white;
        }

        .edit-btn:hover {
            background-color: #3367d6;
        }

        .save-btn {
            background-color: var(--secondary-color);
            color: white;
            display: none;
        }

        .save-btn:hover {
            background-color: #2d9249;
        }

        .cancel-btn {
            background-color: #f1f1f1;
            color: var(--text-color);
            display: none;
        }

        .cancel-btn:hover {
            background-color: #e1e1e1;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                padding: 15px 0;
            }

            .logo {
                margin-bottom: 15px;
            }

            .profile-details {
                grid-template-columns: 1fr;
            }

            .auth-container, .profile-container {
                width: 90%;
                padding: 20px;
            }
        }

        /* Language Toggle */
        .language-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
        }

        .language-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--box-shadow);
            font-weight: 600;
            transition: var(--transition);
        }

        .language-btn:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <img src="https://photos.app.goo.gl/36odpNSMJYBv84YQ9" alt="EduPapers.lk Logo">
                <h1>Edu<span>Papers.lk</span></h1>
            </div>
            <div class="user-profile" id="userProfile">
                <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png" alt="User Avatar" class="user-avatar" id="userAvatar">
                <span class="user-name" id="userName">පුරනය වන්න</span>
                <div class="dropdown-menu">
                    <a href="#" id="viewProfileBtn">මගේ පැතිකඩ</a>
                    <a href="#" id="changePasswordBtn">මුරපදය වෙනස් කරන්න</a>
                    <hr>
                    <a href="#" id="logoutBtn">පිටවීම</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <!-- Welcome Section -->
            <section class="welcome-section" id="welcomeSection">
                <h2>ආයුබෝවන්, <span id="welcomeName">ආගන්තුකයා</span>!</h2>
                <p>ශ්‍රී ලංකාවේ උසස්පෙළ අධ්‍යාපනය සඳහා වන ඔබගේ මාර්ගෝපදේශකයා. ඔබගේ අධ්‍යයන ධාරාව තෝරා අදහස්දැක්වීම් ලබාගන්න.</p>
            </section>

            <!-- Stream Section (Visible if not selected) -->
            <section class="stream-section" id="streamSection">
                <h3 class="section-title">ඔබගේ අධ්‍යයන ධාරාව තෝරන්න</h3>
                <div class="stream-cards">
                    <div class="stream-card" data-stream="science">
                        <div class="stream-icon">🔬</div>
                        <h3>විද්‍යා ධාරාව</h3>
                        <p>ගණිතය, භෞතික විද්‍යාව, රසායන විද්‍යාව, ජීව විද්‍යාව වැනි විෂයයන්</p>
                    </div>
                    <div class="stream-card" data-stream="commerce">
                        <div class="stream-icon">💼</div>
                        <h3>වාණිජ ධාරාව</h3>
                        <p>ගිණුම්කරණය, ව්‍යාපාර අධ්‍යයනය, ආර්ථික විද්‍යාව වැනි විෂයයන්</p>
                    </div>
                    <div class="stream-card" data-stream="arts">
                        <div class="stream-icon">🎨</div>
                        <h3>කලා ධාරාව</h3>
                        <p>ඉතිහාසය, භූගෝල විද්‍යාව, සිංහල, ආගම් වැනි විෂයයන්</p>
                    </div>
                    <div class="stream-card" data-stream="technology">
                        <div class="stream-icon">💻</div>
                        <h3>තාක්ෂණ ධාරාව</h3>
                        <p>තොරතුරු තාක්ෂණය, ඉංජිනේරු තාක්ෂණය, ගණිතය වැනි විෂයයන්</p>
                    </div>
                </div>
            </section>

            <!-- Subjects Section (Visible after stream selection) -->
            <section class="subjects-section" id="subjectsSection" style="display: none;">
                <h3 class="section-title" id="streamTitle">විෂයන්</h3>
                <div class="subjects-grid" id="subjectsGrid">
                    <!-- Subjects will be dynamically loaded here -->
                </div>
            </section>
        </div>
    </main>

    <!-- Footer Section -->
    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-column">
                    <h3>EduPapers.lk</h3>
                    <p>ශ්‍රී ලංකාවේ උසස්පෙළ සිසුන් සඳහා වන ප්‍රමුඛතම අධ්‍යාපනික ප්‍රභලය.</p>
                </div>
                <div class="footer-column">
                    <h3>සබැඳි</h3>
                    <ul>
                        <li><a href="#">ප්‍රධාන පිටුව</a></li>
                        <li><a href="#">ප්‍රශ්නාවලි</a></li>
                        <li><a href="#">සංවර්ධකයින්</a></li>
                        <li><a href="#">සම්බන්ධ වන්න</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>සහාය</h3>
                    <ul>
                        <li><a href="#">උදවු</a></li>
                        <li><a href="#">නිති අසන පැණ</a></li>
                        <li><a href="#">රහස්‍යතා ප්‍රතිපත්තිය</a></li>
                        <li><a href="#">නියමයන් සහ කොන්දේසි</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>සම්බන්ධ වන්න</h3>
                    <ul>
                        <li>විද්‍යුත් තැපෑල: info@edupapers.lk</li>
                        <li>දුරකථන: +94 11 234 5678</li>
                        <li>කොළඹ 07, ශ්‍රී ලංකාව</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 EduPapers.lk. සියලුම හිමිකම් ඇවිරිණි.</p>
            </div>
        </div>
    </footer>

    <!-- Auth Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-container">
            <div class="auth-header">
                <h2 id="authModalTitle">පුරනය වන්න</h2>
                <p id="authModalSubtitle">ඔබගේ ගිණුමට ප්‍රවේශ වීමට</p>
            </div>
            <div class="auth-tabs">
                <div class="auth-tab active" id="loginTab">පුරනය වන්න</div>
                <div class="auth-tab" id="registerTab">ලියාපදිංචි වන්න</div>
            </div>
            
            <!-- Login Form -->
            <div class="auth-form active" id="loginForm">
                <button class="google-auth-btn" id="googleLoginBtn">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" alt="Google Logo">
                    Google සමග පුරනය වන්න
                </button>
                <div style="text-align: center; margin: 15px 0; color: #777;">හෝ</div>
                <div class="form-group">
                    <label for="loginEmail">විද්‍යුත් තැපෑල</label>
                    <input type="email" id="loginEmail" placeholder="ඔබගේ විද්‍යුත් තැපෑල ඇතුළත් කරන්න">
                </div>
                <div class="form-group">
                    <label for="loginPassword">මුරපදය</label>
                    <input type="password" id="loginPassword" placeholder="ඔබගේ මුරපදය ඇතුළත් කරන්න">
                </div>
                <button class="submit-btn" id="loginBtn">පුරනය වන්න</button>
                <div class="auth-footer">
                    ගිණුමක් නැද්ද? <a href="#" id="showRegisterBtn">ලියාපදිංචි වන්න</a>
                </div>
            </div>
            
            <!-- Register Form -->
            <div class="auth-form" id="registerForm">
                <button class="google-auth-btn" id="googleRegisterBtn">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" alt="Google Logo">
                    Google සමග ලියාපදිංචි වන්න
                </button>
                <div style="text-align: center; margin: 15px 0; color: #777;">හෝ</div>
                <div class="form-group">
                    <label for="registerName">සම්පූර්ණ නම</label>
                    <input type="text" id="registerName" placeholder="ඔබගේ සම්පූර්ණ නම ඇතුළත් කරන්න">
                </div>
                <div class="form-group">
                    <label for="registerEmail">විද්‍යුත් තැපෑල</label>
                    <input type="email" id="registerEmail" placeholder="ඔබගේ විද්‍යුත් තැපෑල ඇතුළත් කරන්න">
                </div>
                <div class="form-group">
                    <label for="registerPassword">මුරපදය</label>
                    <input type="password" id="registerPassword" placeholder="මුරපදයක් සාදන්න">
                </div>
                <div class="form-group">
                    <label for="registerStream">අධ්‍යයන ධාරාව</label>
                    <select id="registerStream">
                        <option value="">තෝරන්න</option>
                        <option value="science">විද්‍යා ධාරාව</option>
                        <option value="commerce">වාණිජ ධාරාව</option>
                        <option value="arts">කලා ධාරාව</option>
                        <option value="technology">තාක්ෂණ ධාරාව</option>
                    </select>
                </div>
                <button class="submit-btn" id="registerBtn">ලියාපදිංචි වන්න</button>
                <div class="auth-footer">
                    දැනටමත් ගිණුමක් ඇතිද? <a href="#" id="showLoginBtn">පුරනය වන්න</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div class="profile-modal" id="profileModal">
        <div class="profile-container">
            <div class="profile-header">
                <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png" alt="Profile Picture" class="profile-avatar" id="profileAvatar">
                <div class="profile-info">
                    <h2 id="profileName">නම සඳහන් කර නැත</h2>
                    <p id="profileEmail">විද්‍යුත් තැපෑල සඳහන් කර නැත</p>
                </div>
            </div>
            <div class="profile-details">
                <div class="detail-group">
                    <label>අධ්‍යයන ධාරාව</label>
                    <p id="profileStream">සඳහන් කර නැත</p>
                </div>
                <div class="detail-group">
                    <label>උපන් වර්ෂය</label>
                    <p id="profileBirthYear">සඳහන් කර නැත</p>
                </div>
                <div class="detail-group">
                    <label>ජාතික හැඳුනුම්පත් අංකය</label>
                    <p id="profileNIC">සඳහන් කර නැත</p>
                </div>
                <div class="detail-group">
                    <label>ලිපිනය</label>
                    <p id="profileAddress">සඳහන් කර නැත</p>
                </div>
                <div class="detail-group">
                    <label>දුරකථන අංකය</label>
                    <p id="profilePhone">සඳහන් කර නැත</p>
                </div>
                <div class="detail-group">
                    <label>සාමාන්‍ය පෙල ප්‍රතිපල</label>
                    <p id="profileOLResults">සඳහන් කර නැත</p>
                </div>
            </div>
            <div class="profile-actions">
                <button class="cancel-btn" id="cancelEditBtn">අවලංගු කරන්න</button>
                <button class="save-btn" id="saveProfileBtn">සුරකින්න</button>
                <button class="edit-btn" id="editProfileBtn">සංස්කරණය කරන්න</button>
            </div>
        </div>
    </div>

    <!-- Language Toggle -->
    <div class="language-toggle">
        <button class="language-btn" id="languageBtn">සිං</button>
    </div>

    <!-- Firebase and App Scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD6yXDHsOaqVplfhsXZV8nWvMuioDulwYg",
            authDomain: "edu-login-4d05f.firebaseapp.com",
            projectId: "edu-login-4d05f",
            storageBucket: "edu-login-4d05f.appspot.com",
            messagingSenderId: "197092856272",
            appId: "1:197092856272:web:a00b0169e46e7d5acca9d5",
            measurementId: "G-TM21CT4GJ9"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // DOM Elements
        const authModal = document.getElementById('authModal');
        const profileModal = document.getElementById('profileModal');
        const loginTab = document.getElementById('loginTab');
        const registerTab = document.getElementById('registerTab');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const showRegisterBtn = document.getElementById('showRegisterBtn');
        const showLoginBtn = document.getElementById('showLoginBtn');
        const googleLoginBtn = document.getElementById('googleLoginBtn');
        const googleRegisterBtn = document.getElementById('googleRegisterBtn');
        const loginBtn = document.getElementById('loginBtn');
        const registerBtn = document.getElementById('registerBtn');
        const userProfile = document.getElementById('userProfile');
        const userName = document.getElementById('userName');
        const userAvatar = document.getElementById('userAvatar');
        const viewProfileBtn = document.getElementById('viewProfileBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const welcomeName = document.getElementById('welcomeName');
        const streamSection = document.getElementById('streamSection');
        const subjectsSection = document.getElementById('subjectsSection');
        const streamTitle = document.getElementById('streamTitle');
        const subjectsGrid = document.getElementById('subjectsGrid');
        const streamCards = document.querySelectorAll('.stream-card');
        const profileName = document.getElementById('profileName');
        const profileEmail = document.getElementById('profileEmail');
        const profileAvatar = document.getElementById('profileAvatar');
        const profileStream = document.getElementById('profileStream');
        const profileBirthYear = document.getElementById('profileBirthYear');
        const profileNIC = document.getElementById('profileNIC');
        const profileAddress = document.getElementById('profileAddress');
        const profilePhone = document.getElementById('profilePhone');
        const profileOLResults = document.getElementById('profileOLResults');
        const editProfileBtn = document.getElementById('editProfileBtn');
        const saveProfileBtn = document.getElementById('saveProfileBtn');
        const cancelEditBtn = document.getElementById('cancelEditBtn');
        const languageBtn = document.getElementById('languageBtn');

        // Subjects data
        const subjectsData = {
            science: [
                { name: "ගණිතය", description: "උසස්පෙළ ගණිතය සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 24 },
                { name: "භෞතික විද්‍යාව", description: "භෞතික විද්‍යාව සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 18 },
                { name: "රසායන විද්‍යාව", description: "රසායන විද්‍යාව සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 15 },
                { name: "ජීව විද්‍යාව", description: "ජීව විද්‍යාව සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 12 }
            ],
            commerce: [
                { name: "ගිණුම්කරණය", description: "උසස්පෙළ ගිණුම්කරණය සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 20 },
                { name: "ව්‍යාපාර අධ්‍යයනය", description: "ව්‍යාපාර අධ්‍යයනය සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 16 },
                { name: "ආර්ථික විද්‍යාව", description: "ආර්ථික විද්‍යාව සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 14 }
            ],
            arts: [
                { name: "ඉතිහාසය", description: "ශ්‍රී ලංකා සහ ලෝක ඉතිහාසය සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 22 },
                { name: "භූගෝල විද්‍යාව", description: "භූගෝල විද්‍යාව සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 18 },
                { name: "සිංහල", description: "සිංහල භාෂාව සහ සාහිත්‍යය සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 15 },
                { name: "ආගම්", description: "බෞද්ධ ආගම සහ අනෙකුත් ආගම් සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 12 }
            ],
            technology: [
                { name: "තොරතුරු තාක්ෂණය", description: "තොරතුරු තාක්ෂණය සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 20 },
                { name: "ඉංජිනේරු තාක්ෂණය", description: "ඉංජිනේරු තාක්ෂණය සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 16 },
                { name: "ගණිතය", description: "තාක්ෂණ ගණිතය සඳහා වන පාඩම් සහ ප්‍රශ්න", papers: 18 }
            ]
        };

        // Current user data
        let currentUser = null;
        let currentStream = null;
        let isEnglish = false;

        // Event Listeners
        userProfile.addEventListener('click', () => {
            if (!currentUser) {
                authModal.classList.add('active');
            }
        });

        viewProfileBtn.addEventListener('click', (e) => {
            e.preventDefault();
            profileModal.classList.add('active');
        });

        logoutBtn.addEventListener('click', (e) => {
            e.preventDefault();
            auth.signOut();
        });

        loginTab.addEventListener('click', () => {
            loginTab.classList.add('active');
            registerTab.classList.remove('active');
            loginForm.classList.add('active');
            registerForm.classList.remove('active');
        });

        registerTab.addEventListener('click', () => {
            registerTab.classList.add('active');
            loginTab.classList.remove('active');
            registerForm.classList.add('active');
            loginForm.classList.remove('active');
        });

        showRegisterBtn.addEventListener('click', (e) => {
            e.preventDefault();
            registerTab.click();
        });

        showLoginBtn.addEventListener('click', (e) => {
            e.preventDefault();
            loginTab.click();
        });

        googleLoginBtn.addEventListener('click', signInWithGoogle);
        googleRegisterBtn.addEventListener('click', signInWithGoogle);

        streamCards.forEach(card => {
            card.addEventListener('click', () => {
                const stream = card.getAttribute('data-stream');
                selectStream(stream);
            });
        });

        editProfileBtn.addEventListener('click', enableProfileEditing);
        saveProfileBtn.addEventListener('click', saveProfile);
        cancelEditBtn.addEventListener('click', cancelProfileEditing);
        languageBtn.addEventListener('click', toggleLanguage);

        // Initialize the app
        function initApp() {
            auth.onAuthStateChanged(user => {
                if (user) {
                    // User is signed in
                    currentUser = user;
                    updateUI(user);
                    checkUserProfile(user.uid);
                } else {
                    // User is signed out
                    currentUser = null;
                    updateUI(null);
                }
            });
        }

        // Sign in with Google
        function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider)
                .then(result => {
                    // Check if this is a new user
                    if (result.additionalUserInfo.isNewUser) {
                        // Create user profile in Firestore
                        createUserProfile(result.user);
                    }
                    authModal.classList.remove('active');
                })
                .catch(error => {
                    console.error('Google sign in error:', error);
                });
        }

        // Create user profile in Firestore
        function createUserProfile(user) {
            db.collection('users').doc(user.uid).set({
                name: user.displayName || '',
                email: user.email,
                photoURL: user.photoURL || '',
                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                stream: '',
                birthYear: '',
                nic: '',
                address: '',
                phone: '',
                olResults: ''
            })
            .then(() => {
                console.log('User profile created');
            })
            .catch(error => {
                console.error('Error creating user profile:', error);
            });
        }

        // Check user profile data
        function checkUserProfile(uid) {
            db.collection('users').doc(uid).get()
                .then(doc => {
                    if (doc.exists) {
                        const userData = doc.data();
                        if (userData.stream) {
                            currentStream = userData.stream;
                            streamSection.style.display = 'none';
                            subjectsSection.style.display = 'block';
                            loadSubjects(userData.stream);
                            streamTitle.textContent = `${getStreamName(userData.stream)} විෂයන්`;
                        }
                        
                        // Update profile modal
                        profileName.textContent = userData.name || 'නම සඳහන් කර නැත';
                        profileEmail.textContent = userData.email || 'විද්‍යුත් තැපෑල සඳහන් කර නැත';
                        profileAvatar.src = userData.photoURL || 'https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png';
                        profileStream.textContent = userData.stream ? getStreamName(userData.stream) : 'සඳහන් කර නැත';
                        profileBirthYear.textContent = userData.birthYear || 'සඳහන් කර නැත';
                        profileNIC.textContent = userData.nic || 'සඳහන් කර නැත';
                        profileAddress.textContent = userData.address || 'සඳහන් කර නැත';
                        profilePhone.textContent = userData.phone || 'සඳහන් කර නැත';
                        profileOLResults.textContent = userData.olResults || 'සඳහන් කර නැත';
                    }
                })
                .catch(error => {
                    console.error('Error getting user profile:', error);
                });
        }

        // Select stream
        function selectStream(stream) {
            if (!currentUser) return;
            
            currentStream = stream;
            db.collection('users').doc(currentUser.uid).update({
                stream: stream
            })
            .then(() => {
                streamSection.style.display = 'none';
                subjectsSection.style.display = 'block';
                streamTitle.textContent = `${getStreamName(stream)} විෂයන්`;
                loadSubjects(stream);
            })
            .catch(error => {
                console.error('Error updating stream:', error);
            });
        }

        // Load subjects for selected stream
        function loadSubjects(stream) {
            subjectsGrid.innerHTML = '';
            const subjects = subjectsData[stream] || [];
            
            subjects.forEach(subject => {
                const subjectCard = document.createElement('div');
                subjectCard.className = 'subject-card';
                subjectCard.innerHTML = `
                    <h3>${subject.name}</h3>
                    <p>${subject.description}</p>
                    <div class="subject-meta">
                        <span>ප්‍රශ්න පත්‍ර: ${subject.papers}</span>
                        <span>අලුත්තම: 2023</span>
                    </div>
                `;
                subjectsGrid.appendChild(subjectCard);
            });
        }

        // Get stream name
        function getStreamName(stream) {
            const names = {
                science: 'විද්‍යා',
                commerce: 'වාණිජ',
                arts: 'කලා',
                technology: 'තාක්ෂණ'
            };
            return names[stream] || stream;
        }

        // Enable profile editing
        function enableProfileEditing() {
            const detailGroups = document.querySelectorAll('.detail-group p');
            detailGroups.forEach(group => {
                const value = group.textContent;
                const field = group.parentElement.querySelector('label').textContent;
                let inputType = 'text';
                
                if (field.includes('වර්ෂය')) inputType = 'number';
                if (field.includes('ප්‍රතිපල')) inputType = 'textarea';
                
                if (inputType === 'textarea') {
                    group.innerHTML = `<textarea style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd;">${value}</textarea>`;
                } else {
                    group.innerHTML = `<input type="${inputType}" value="${value}" style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd;">`;
                }
            });
            
            editProfileBtn.style.display = 'none';
            saveProfileBtn.style.display = 'inline-block';
            cancelEditBtn.style.display = 'inline-block';
        }

        // Save profile
        function saveProfile() {
            const updates = {};
            const detailGroups = document.querySelectorAll('.detail-group');
            
            detailGroups.forEach(group => {
                const label = group.querySelector('label').textContent;
                const input = group.querySelector('input, textarea');
                const value = input.value;
                
                if (label.includes('ධාරාව')) updates.stream = value;
                if (label.includes('වර්ෂය')) updates.birthYear = value;
                if (label.includes('අංකය')) updates.nic = value;
                if (label.includes('ලිපිනය')) updates.address = value;
                if (label.includes('අංකය')) updates.phone = value;
                if (label.includes('ප්‍රතිපල')) updates.olResults = value;
            });
            
            db.collection('users').doc(currentUser.uid).update(updates)
                .then(() => {
                    cancelProfileEditing();
                    checkUserProfile(currentUser.uid);
                })
                .catch(error => {
                    console.error('Error updating profile:', error);
                });
        }

        // Cancel profile editing
        function cancelProfileEditing() {
            checkUserProfile(currentUser.uid);
            editProfileBtn.style.display = 'inline-block';
            saveProfileBtn.style.display = 'none';
            cancelEditBtn.style.display = 'none';
        }

        // Toggle language
        function toggleLanguage() {
            isEnglish = !isEnglish;
            languageBtn.textContent = isEnglish ? 'EN' : 'සිං';
            // Here you would implement full language switching logic
            // For now we'll just toggle the welcome message as an example
            if (isEnglish) {
                welcomeName.textContent = currentUser ? currentUser.displayName || 'User' : 'Guest';
                document.title = "EduPapers.lk - Sri Lankan A/L Education System";
            } else {
                welcomeName.textContent = currentUser ? currentUser.displayName || 'පරිශීලක' : 'ආගන්තුකයා';
                document.title = "EduPapers.lk - ශ්‍රී ලංකා උසස්පෙළ අධ්‍යාපන පද්ධතිය";
            }
        }

        // Update UI based on auth state
        function updateUI(user) {
            if (user) {
                // User is signed in
                userName.textContent = user.displayName || 'පරිශීලක';
                userAvatar.src = user.photoURL || 'https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png';
                welcomeName.textContent = user.displayName || 'පරිශීලක';
                
                // Show profile dropdown
                userProfile.style.cursor = 'pointer';
                
                // Hide auth modal if open
                authModal.classList.remove('active');
            } else {
                // User is signed out
                userName.textContent = 'පුරනය වන්න';
                userAvatar.src = 'https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png';
                welcomeName.textContent = 'ආගන්තුකයා';
                
                // Show stream selection and hide subjects
                streamSection.style.display = 'block';
                subjectsSection.style.display = 'none';
                
                // Hide profile modal if open
                profileModal.classList.remove('active');
            }
        }

        // Initialize the app
        window.addEventListener('load', initApp);
    </script>
</body>
</html>